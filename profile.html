<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Nalanda Matrimony Profiles</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
</head>
<script src="auth.js"></script>

<body>

  <!-- üå∏ Header -->
  <header>
    <h1>üå∏ Nalanda Matrimony</h1>
    <p>Browse verified biodata profiles</p>
    <button onclick="logout()">Logout</button>

<script>
  function logout() {
    localStorage.removeItem("isLoggedIn");
    localStorage.removeItem("userMobile");
    window.location.href = "index.html";
  }
</script>

  </header>

  <!-- üîç Filters -->
  <div class="filter-bar">
    <input type="text" id="searchInput" placeholder="üîç Search by name, education, or location">

    <select id="ageFilter">
      <option value="">Age Range</option>
      <option value="20-25">20‚Äì25</option>
      <option value="26-30">26‚Äì30</option>
      <option value="31-35">31‚Äì35</option>
    </select>

    <select id="educationFilter">
      <option value="">Education</option>
      <option value="MBA">MBA</option>
      <option value="MCA">MCA</option>
      <option value="B.Tech">B.Tech</option>
      <option value="M.Sc">M.Sc</option>
      <option value="LLB">LLB</option>
    </select>

    <select id="locationFilter">
      <option value="">Location</option>
      <option value="Mumbai">Mumbai</option>
      <option value="Pune">Pune</option>
      <option value="Nagpur">Nagpur</option>
      <option value="Nashik">Nashik</option>
      <option value="Thane">Thane</option>
    </select>

    <button id="resetBtn">Reset</button>
  </div>

  <!-- üíç Profiles Grid -->
  <div id="profiles" class="grid"></div>

  <!-- üåê Footer -->
  <footer>
    <p>¬© 2026 Nalanda Matrimony | Designed with ‚ù§Ô∏è in Maharashtra</p>
  </footer>

  <!-- Candidate Data -->
  <script src="data.js"></script>

  <!-- Filter & Render Script -->
  <script>
    const profilesContainer = document.getElementById("profiles");
    const searchInput = document.getElementById("searchInput");
    const ageFilter = document.getElementById("ageFilter");
    const educationFilter = document.getElementById("educationFilter");
    const locationFilter = document.getElementById("locationFilter");
    const resetBtn = document.getElementById("resetBtn");

    function renderProfiles(data) {
      if (data.length === 0) {
        profilesContainer.innerHTML = "<p style='text-align:center;'>No profiles found</p>";
        return;
      }

      profilesContainer.innerHTML = data.map(candidate => `
        <div class="card">
          <img src="${candidate.image}" alt="${candidate.name}" class="profile-img">
          <div class="info">
            <h2>${candidate.name}</h2>
            <p>Age: ${candidate.age}</p>
            <p>Education: ${candidate.education}</p>
            <p>Location: ${candidate.location}</p>
            <p>Community: ${candidate.community}</p>
            <p>Marital Status: ${candidate.maritalStatus}</p>
            <p>${candidate.bio}</p>
            <a href="details.html?id=${candidate.id}" class="detail-link">
              View Full Profile
            </a>
          </div>
        </div>
      `).join("");
    }

    function applyFilters() {
      let filtered = [...candidates];

      // üîç Search
      const text = searchInput.value.toLowerCase();
      if (text) {
        filtered = filtered.filter(c =>
          c.name.toLowerCase().includes(text) ||
          c.education.toLowerCase().includes(text) ||
          c.location.toLowerCase().includes(text)
        );
      }

      // üéÇ Age
      if (ageFilter.value) {
        const [min, max] = ageFilter.value.split("-").map(Number);
        filtered = filtered.filter(c => c.age >= min && c.age <= max);
      }

      // üéì Education
      if (educationFilter.value) {
        filtered = filtered.filter(c => c.education === educationFilter.value);
      }

      // üìç Location
      if (locationFilter.value) {
        filtered = filtered.filter(c => c.location === locationFilter.value);
      }

      renderProfiles(filtered);
    }

    // Events
    searchInput.addEventListener("input", applyFilters);
    ageFilter.addEventListener("change", applyFilters);
    educationFilter.addEventListener("change", applyFilters);
    locationFilter.addEventListener("change", applyFilters);

    resetBtn.addEventListener("click", () => {
      searchInput.value = "";
      ageFilter.value = "";
      educationFilter.value = "";
      locationFilter.value = "";
      renderProfiles(candidates);
    });

    // Initial load
    renderProfiles(candidates);
  </script>

</body>
</html>
