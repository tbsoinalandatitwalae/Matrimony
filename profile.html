<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <!-- ‚úÖ MOBILE FIX (ADDED) -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Nalanda Matrimony Profiles</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
</head>

<script src="auth.js"></script>
<script>
  function logout() {
    localStorage.removeItem("isLoggedIn");
    localStorage.removeItem("userMobile");
    window.location.href = "index.html";
  }
</script>

<body>

  <!-- üå∏ Header -->
  <header class="site-header">
    <div class="header-content">
      <h1>üå∏ Nalanda Matrimony</h1>
      <p>Verified Matrimonial Biodata</p>
    </div>

    <!-- Logout Button -->
    <button class="logout-btn" onclick="logout()">Logout</button>
  </header>

  <!-- üîç Filters -->
  <div class="filter-bar">
    <input type="text" id="searchInput" placeholder="üîç Search by name, education, or location">

    <select id="ageFilter">
      <option value="">Age Range</option>
      <option value="20-25">20‚Äì25</option>
      <option value="26-30">26‚Äì30</option>
      <option value="31-35">31‚Äì35</option>
    </select>

    <select id="educationFilter">
      <option value="">Education</option>
      <option value="MBA">MBA</option>
      <option value="MCA">MCA</option>
      <option value="B.Tech">B.Tech</option>
      <option value="M.Sc">M.Sc</option>
      <option value="LLB">LLB</option>
    </select>

    <select id="locationFilter">
      <option value="">Location</option>
      <option value="Mumbai">Mumbai</option>
      <option value="Pune">Pune</option>
      <option value="Nagpur">Nagpur</option>
      <option value="Nashik">Nashik</option>
      <option value="Thane">Thane</option>
    </select>

    <button id="resetBtn">Reset</button>
  </div>

  <!-- üíç Profiles Grid -->
  <div id="profiles" class="grid"></div>

  <!-- üåê Footer (UNCHANGED) -->
  <footer>
    <p>¬© 2026 Nalanda Matrimony | Designed with ‚ù§Ô∏è in Maharashtra</p>
    <p>Contact: tbsoinalandatitwalae@gmail.com</p>

    <p class="disclaimer">
      Disclaimer: Nalanda Matrimony is a community-based matrimonial information platform.
      All profiles and details are shared by members or their families.
      Nalanda Matrimony does not verify, guarantee, or take responsibility for the accuracy,
      authenticity, or intentions of any profile. Users are advised to independently verify
      all information before proceeding with any matrimonial decisions.
    </p>
  </footer>

  <!-- Candidate Data -->
  <script src="data.js"></script>

  <!-- üîé Filter & Render Script -->
  <script>
    const profilesContainer = document.getElementById("profiles");
    const searchInput = document.getElementById("searchInput");
    const ageFilter = document.getElementById("ageFilter");
    const educationFilter = document.getElementById("educationFilter");
    const locationFilter = document.getElementById("locationFilter");
    const resetBtn = document.getElementById("resetBtn");

    function renderProfiles(data) {
      if (data.length === 0) {
        profilesContainer.innerHTML =
          "<p style='text-align:center;'>No profiles found</p>";
        return;
      }

      profilesContainer.innerHTML = data.map(candidate => `
        <div class="card">
          <img src="${candidate.image}" alt="${candidate.name}" class="profile-img">

          <div class="info">
            <h2>${candidate.name}</h2>
            <p>Education: ${candidate.education}</p>
            <p>Location: ${candidate.currentLocation}</p>
            <p>Community: ${candidate.community}</p>
            <p>${candidate.bio}</p>

            <a href="details.html?id=${candidate.id}" class="detail-link">
              View Full Profile
            </a>
          </div>
        </div>
      `).join("");
    }

    function applyFilters() {
      let filtered = [...candidates];

      /* üîç SEARCH (FIXED FIELD NAMES) */
      const text = searchInput.value.toLowerCase();
      if (text) {
        filtered = filtered.filter(c =>
          c.name.toLowerCase().includes(text) ||
          c.education.toLowerCase().includes(text) ||
          c.currentLocation.toLowerCase().includes(text)
        );
      }

      /* üéì EDUCATION (PARTIAL MATCH FIX) */
      if (educationFilter.value) {
        filtered = filtered.filter(c =>
          c.education.toLowerCase().includes(
            educationFilter.value.toLowerCase()
          )
        );
      }

      /* üìç LOCATION */
      if (locationFilter.value) {
        filtered = filtered.filter(c =>
          c.currentLocation.toLowerCase().includes(
            locationFilter.value.toLowerCase()
          )
        );
      }

      /* ‚ö†Ô∏è AGE FILTER DISABLED (NO AGE FIELD IN DATA) */
      // Intentionally skipped to avoid breaking

      renderProfiles(filtered);
    }

    /* Events */
    searchInput.addEventListener("input", applyFilters);
    educationFilter.addEventListener("change", applyFilters);
    locationFilter.addEventListener("change", applyFilters);

    resetBtn.addEventListener("click", () => {
      searchInput.value = "";
      ageFilter.value = "";
      educationFilter.value = "";
      locationFilter.value = "";
      renderProfiles(candidates);
    });

    /* Initial Load */
    renderProfiles(candidates);
  </script>

</body>
</html>
